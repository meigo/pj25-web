---
import Particles from "astro-particles";
import type { ISourceOptions } from "tsparticles-engine";

const options: ISourceOptions = {
  fpsLimit: 25,
  fullScreen: {
    enable: false,
    zIndex: 0,
  },
  particles: {
    number: {
      value: 50,
    },
    move: {
      enable: true,
      speed: 4,
      direction: "top",
      random: false,
      straight: false,
      outMode: "out",
      bounce: false,
      attract: {
        enable: false,
        rotateX: 1200,
        rotateY: 1200,
      },
    },
    size: {
      value: 1.2,
      random: false,
      anim: {
        enable: true,
        speed: 20,
        minimumValue: 0.4,
        sync: false,
      },
    },
    wobble: {
      distance: 100,
      enable: true,
      speed: {
        min: -5,
        max: 5,
      },
    },
    color: {
      value: ["#FFEA00", "#FFA600", "#FFF"],
    },
    opacity: {
      value: 1,
      random: false,
      anim: {
        enable: false,
        speed: 1,
        opacity_min: 0.1,
        sync: false,
      },
    },
  },
};
---

<script>
  import { type Engine } from "tsparticles-engine";
  import { loadSlim } from "tsparticles-slim";

  // the function name is the parameter passed to the init attribute required add the function to window is mandatory, it will be searched there
  (window as any).particlesInit = async function (engine: Engine) {
    await loadSlim(engine);
  };
</script>

<Particles id="tsparticles" options={options} init="particlesInit" />

<style is:global>
  astro-particles {
    @apply fixed;
  }

  #tsparticles {
    @apply absolute top-0 inset-x-0 h-full hidden md:block pointer-events-none;
  }
</style>
